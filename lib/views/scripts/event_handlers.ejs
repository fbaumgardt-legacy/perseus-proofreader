<script type="text/javascript">
    var changeBtn = function(jq, text) {
        jq.group = jq.elem.closest(".btn-group").first();
        jq.toggle = jq.group.find(".dropdown-toggle").first().removeClass("btn-danger btn-warning btn-info").addClass("btn-success");
        jq.btn = jq.group.find(".alt").first().removeClass("btn-danger btn-warning btn-info").addClass("btn-success");

        json.index[jq.group.first().attr("id")].children[0].children  = [{tag:"ins",text:text,attributes:{title:"nlp 2.00"}}];
        jq.btn.text(text);
    }
    // Event handlers
    $('.dropdown-menu input').click(function(e){
        e.stopPropagation();
    }).keypress(function(e) { if (e.keyCode == 13) {
                $('.btn-group.open .dropdown-toggle').dropdown('toggle');
                changeBtn({elem: $(e.target)}, $(e.target)[0].value)
                return false;
            }});
    $('li > a').click(function (e) {
        $('.btn-group.open .dropdown-toggle').dropdown('toggle');
        changeBtn({elem: $(e.target)}, $(e.target).text())
        return false;
    });
    $('#btn-commit').click(function(e) {
        $.post('',json.doc.html,function(){
            $('#btn-commit').prop('disabled', true);
        });
    });
</script>